# =============================================================================
# Kustomization for Nextcloud App Store
# =============================================================================
# Apply all resources with: kubectl apply -k k8s/
# =============================================================================
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: nextcloud-appstore

resources:
  - namespace.yaml
  - secrets.yaml
  - configmap.yaml
  - pvc.yaml
  - postgres-deployment.yaml
  - appstore-deployment.yaml
  - nginx-deployment.yaml
  - ingress.yaml
  # Uncomment for initial setup job:
  # - cronjob.yaml

commonLabels:
  app.kubernetes.io/part-of: nextcloud-appstore
  app.kubernetes.io/managed-by: kustomize

# Optional: Add image transformations for private registry
# images:
#   - name: nextcloudappstore
#     newName: your-registry.example.com/nextcloudappstore
#     newTag: latest
#   - name: postgres
#     newName: your-registry.example.com/postgres
#     newTag: 15-alpine
#   - name: nginx
#     newName: your-registry.example.com/nginx
#     newTag: alpine
