# =============================================================================
# Secrets for Nextcloud App Store
# =============================================================================
# IMPORTANT: Replace all placeholder values before applying!
# Generate SECRET_KEY with: 
#   env LC_CTYPE=C tr -dc "a-zA-Z0-9-_\$\?" < /dev/urandom | head -c 64; echo
# Then base64 encode: echo -n "your-value" | base64
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: appstore-secrets
  namespace: nextcloud-appstore
  labels:
    app.kubernetes.io/name: nextcloud-appstore
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # Base64 encoded values - CHANGE THESE!
  # echo -n "your-secret-key-64-chars" | base64
  SECRET_KEY: Q0hBTkdFX1RISVNfSU5fUFJPRFVDVElPTl91c2VfNjRfY2hhcl9yYW5kb21fc3RyaW5n
  
  # echo -n "your-db-password" | base64
  DATABASE_PASSWORD: Y2hhbmdlbWVfcHJvZHVjdGlvbl9wYXNzd29yZA==
  
  # ==========================================================================
  # NOTE: GitHub OAuth is NOT used in air-gapped environments
  # Social login requires internet access which is not available
  # Users must use local accounts created via Django admin
  # ==========================================================================

---
# =============================================================================
# PostgreSQL Secrets
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secrets
  namespace: nextcloud-appstore
  labels:
    app.kubernetes.io/name: nextcloud-appstore
    app.kubernetes.io/component: database
type: Opaque
data:
  # echo -n "nextcloudappstore" | base64
  POSTGRES_USER: bmV4dGNsb3VkYXBwc3RvcmU=
  
  # echo -n "nextcloudappstore" | base64
  POSTGRES_DB: bmV4dGNsb3VkYXBwc3RvcmU=
  
  # echo -n "your-db-password" | base64 - CHANGE THIS!
  POSTGRES_PASSWORD: Y2hhbmdlbWVfcHJvZHVjdGlvbl9wYXNzd29yZA==

# =============================================================================
# TLS Secret is in 09-tls-secret.yaml (generated by generate-certs.sh)
# =============================================================================
