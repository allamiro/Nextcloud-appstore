# =============================================================================
# Secrets for Nextcloud App Store
# =============================================================================
# IMPORTANT: Replace all placeholder values before applying!
# Generate SECRET_KEY with: 
#   env LC_CTYPE=C tr -dc "a-zA-Z0-9-_\$\?" < /dev/urandom | head -c 64; echo
# Then base64 encode: echo -n "your-value" | base64
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: appstore-secrets
  namespace: nextcloud-appstore
  labels:
    app.kubernetes.io/name: nextcloud-appstore
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # Base64 encoded values - CHANGE THESE!
  # echo -n "your-secret-key-64-chars" | base64
  SECRET_KEY: Q0hBTkdFX1RISVNfSU5fUFJPRFVDVElPTl91c2VfNjRfY2hhcl9yYW5kb21fc3RyaW5n
  
  # echo -n "your-db-password" | base64
  DATABASE_PASSWORD: Y2hhbmdlbWVfcHJvZHVjdGlvbl9wYXNzd29yZA==
  
  # echo -n "your-github-token" | base64 (optional)
  GITHUB_API_TOKEN: ""
  
  # echo -n "your-github-client-id" | base64 (optional)
  GITHUB_CLIENT_ID: ""
  
  # echo -n "your-github-client-secret" | base64 (optional)
  GITHUB_CLIENT_SECRET: ""
  
  # echo -n "your-recaptcha-public-key" | base64 (optional)
  RECAPTCHA_PUBLIC_KEY: ""
  
  # echo -n "your-recaptcha-private-key" | base64 (optional)
  RECAPTCHA_PRIVATE_KEY: ""

---
# =============================================================================
# PostgreSQL Secrets
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: postgres-secrets
  namespace: nextcloud-appstore
  labels:
    app.kubernetes.io/name: nextcloud-appstore
    app.kubernetes.io/component: database
type: Opaque
data:
  # echo -n "nextcloudappstore" | base64
  POSTGRES_USER: bmV4dGNsb3VkYXBwc3RvcmU=
  
  # echo -n "nextcloudappstore" | base64
  POSTGRES_DB: bmV4dGNsb3VkYXBwc3RvcmU=
  
  # echo -n "your-db-password" | base64 - CHANGE THIS!
  POSTGRES_PASSWORD: Y2hhbmdlbWVfcHJvZHVjdGlvbl9wYXNzd29yZA==

---
# =============================================================================
# TLS Secret for Ingress (create separately or use cert-manager)
# =============================================================================
# apiVersion: v1
# kind: Secret
# metadata:
#   name: appstore-tls
#   namespace: nextcloud-appstore
# type: kubernetes.io/tls
# data:
#   tls.crt: <base64-encoded-certificate>
#   tls.key: <base64-encoded-private-key>
